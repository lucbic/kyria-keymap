#include <input/processors.dtsi>

&pro_micro_i2c {
    status = "disabled";
    glidepoint0: glidepoint@2a {
        compatible = "cirque,pinnacle";
        reg = <0x2a>;
        status = "disabled";
        dr-gpios = <&pro_micro 0 (GPIO_ACTIVE_HIGH)>;
        y-invert;

        sensitivity = "1x";
    };
};

/ {
    split_inputs {
        #address-cells = <1>;
        #size-cells = <0>;

        glidepoint_split: glidepoint_split@0 {
            compatible = "zmk,input-split";
            reg = <0>;
        };
    };

    glidepoint_listener: glidepoint_listener {
        compatible = "zmk,input-listener";
        input-processors = <&zip_xy_scaler 4 4>;
        status = "disabled";
        device = <&glidepoint_split>;
        
        // Pointing configuration
        acceleration-exponent = <2>;      // Increase for higher acceleration (default: 1)
        time-to-max-speed-ms = <300>;     // Decrease for faster ramp-up to max speed (default: 500)
        scroll-layer = <2>;               // Optional: layer on which scrolling is active
        scroll-speed = <20>;              // Default is 10, higher is faster
    };
    
    pointing_devices {
        compatible = "zmk,pointing-devices";
        pinnacle_trackpad: pinnacle_trackpad {
            compatible = "cirque,pinnacle";
            status = "okay";
            zephyr,drdy-gpios = <&gpio0 9 GPIO_ACTIVE_HIGH>;
        };
    };
};

/* Create the pointing node alias for the pinnacle trackpad */
pointing: &glidepoint_listener {};